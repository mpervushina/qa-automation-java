[
  {
    "order": 1,
    "type_code": "PR_EOC_CASHBACK_COUNTER",
    "expression": "min(min(min(PR_PURCHASE_COMMON_BONUS_COUNTER*5,PR_PURCHASE_HIGH_BONUS_COUNTER)+PR_PURCHASE_COMMON_BONUS_COUNTER+CORRECT_AVAILABLE_PLUS_COUNTER+MA_PURCHASE_COUNTER,max(AVAILABLE,0)),PR_EOC_BONUS_LIMIT)"
  },
  {
    "order": 2,
    "type_code": "PR_EOC_MINUS_AVAILABLE_COUNTER",
    "expression": "max(AVAILABLE-PR_EOC_CASHBACK_COUNTER,0)"
  },
  {
    "order": 3,
    "type_code": "TEMP_CURRENT_AVAILABLE",
    "expression": "PR_PURCHASE_COMMON_BONUS_COUNTER+CORRECT_AVAILABLE_PLUS_COUNTER+MA_PURCHASE_COUNTER+PR_PURCHASE_HIGH_BONUS_COUNTER",
    "description": "Текущеекол-вопокупоквтекущемпериоде"
  },
  {
    "order": 4,
    "type_code": "TEMP_DECREASE",
    "expression": "min(TEMP_CURRENT_AVAILABLE+AVAILABLE,0)*-1",
    "description": "Получаемкол-воотменныхбонусов"
  },
  {
    "order": 5,
    "type_code": "TEMP_PR_GLOBAL_POTENTIAL_BONUS_WITHOUT_LIMIT",
    "expression": "ceil(if(PR_PURCHASE_COMMON_BONUS_COUNTER*5-TEMP_DECREASE<PR_PURCHASE_HIGH_BONUS_COUNTER,PR_PURCHASE_HIGH_BONUS_COUNTER/5+TEMP_DECREASE-PR_PURCHASE_COMMON_BONUS_COUNTER,0))",
    "description": "Кол-вобонусовдлятогочтобыполучитьвсеповышенныебонусыбезлимита"
  },
  {
    "order": 6,
    "type_code": "PR_GLOBAL_POTENTIAL_BONUS_COUNTER",
    "expression": "if(TEMP_PR_GLOBAL_POTENTIAL_BONUS_WITHOUT_LIMIT+min(TEMP_PR_GLOBAL_POTENTIAL_BONUS_WITHOUT_LIMIT*5,PR_PURCHASE_HIGH_BONUS_COUNTER)+CORRECT_AVAILABLE_PLUS_COUNTER+MA_PURCHASE_COUNTER>PR_EOC_BONUS_LIMIT,PR_EOC_BONUS_LIMIT-PR_EOC_CASHBACK_COUNTER,max(AVAILABLE,0)+TEMP_PR_GLOBAL_POTENTIAL_BONUS_WITHOUT_LIMIT-PR_EOC_CASHBACK_COUNTER)"
  },
  {
    "order": 7,
    "type_code": "PR_GLOBAL_DEFICIENT_COMMON_AMOUNT_COUNTER",
    "expression": "TEMP_PR_GLOBAL_POTENTIAL_BONUS_WITHOUT_LIMIT*100"
  },
  {
    "order": 50,
    "type_code": "TR_EOC_TRAVEL_CASHBACK_COUNTER",
    "expression": "min(max(TRAVEL_AVAILABLE,0),TR_EOC_BONUS_LIMIT)"
  },
  {
    "order": 51,
    "type_code": "TR_EOC_MINUS_TRAVEL_AVAILABLE_COUNTER",
    "expression": "max(TRAVEL_AVAILABLE-TR_EOC_TRAVEL_CASHBACK_COUNTER,0)"
  },
  {
    "type_code": "TT_EOC_PARTNER_PENDING_TO_AVAILABLE_COUNTER",
    "order": 100,
    "expression": "min(max(TARGET_PENDING_PARTNER,0),(TT_EOC_BONUS_LIMIT+abs(min(TARGET_AVAILABLE_BANK,0)+min(TARGET_AVAILABLE_PARTNER,0))))"
  },
  {
    "type_code": "TT_EOC_BANK_PENDING_TO_AVAILABLE_COUNTER",
    "order": 110,
    "expression": "min(max(TARGET_PENDING_BANK,0),(TT_EOC_BONUS_LIMIT+abs(min(TARGET_AVAILABLE_BANK,0)+min(TARGET_AVAILABLE_PARTNER,0)))-TT_EOC_PARTNER_PENDING_TO_AVAILABLE_COUNTER)"
  },
  {
    "type_code": "TEMP_TT_GLOBAL_ACCRUAL",
    "order": 120,
    "expression": "max(TT_EOC_PARTNER_PENDING_TO_AVAILABLE_COUNTER+TT_EOC_BANK_PENDING_TO_AVAILABLE_COUNTER+TARGET_AVAILABLE_BANK+TARGET_AVAILABLE_PARTNER,0)"
  },
  {
    "type_code": "TT_EOC_CASHBACK_COUNTER",
    "order": 130,
    "expression": "min(TEMP_TT_GLOBAL_ACCRUAL,TT_EOC_BONUS_LIMIT+max(TARGET_AVAILABLE_BANK,0)+max(TARGET_AVAILABLE_PARTNER,0))"
  },
  {
    "type_code": "TT_GLOBAL_ACCRUAL_COUNTER",
    "order": 140,
    "expression": "TEMP_TT_GLOBAL_ACCRUAL"
  },
  {
    "type_code": "LS_EOC_PARTNER_PENDING_TO_AVAILABLE_COUNTER",
    "order": 200,
    "expression": "max(LIFESTYLE_PENDING_PARTNER,0)"
  },
  {
    "type_code": "LS_EOC_BANK_PENDING_TO_AVAILABLE_COUNTER",
    "order": 210,
    "expression": "max(LIFESTYLE_PENDING_BANK,0)"
  },
  {
    "type_code": "LS_EOC_CASHBACK_COUNTER",
    "order": 220,
    "expression": "max(LS_EOC_PARTNER_PENDING_TO_AVAILABLE_COUNTER+LS_EOC_BANK_PENDING_TO_AVAILABLE_COUNTER+LIFESTYLE_AVAILABLE_PARTNER+LIFESTYLE_AVAILABLE_BANK,0)"
  },
  {
    "type_code": "LS_GLOBAL_ACCRUAL_COUNTER",
    "order": 230,
    "expression": "LS_EOC_CASHBACK_COUNTER"
  },
  {
    "type_code": "ALL_GLOBAL_ACCRUAL_COUNTER",
    "order": 300,
    "expression": "min(TT_GLOBAL_ACCRUAL_COUNTER,TT_EOC_BONUS_LIMIT)+LS_GLOBAL_ACCRUAL_COUNTER+min(PR_GLOBAL_ACCRUAL_COUNTER,PR_EOC_BONUS_LIMIT)+min(TR_GLOBAL_ACCRUAL_COUNTER,TR_EOC_BONUS_LIMIT)"
  }
]